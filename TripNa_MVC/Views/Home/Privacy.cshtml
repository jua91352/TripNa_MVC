@model IEnumerable<TripNa_MVC.Models.Spot>
@{
    ViewData["Title"] = "Privacy Policy";
}
@{
    var cities = ViewBag.Cities as List<string>;
   
}

<head>
    <!--自訂-->
    <link rel="stylesheet" href="~/css/Privacy.css">
</head>

@* @foreach(var spot in Model)
{
    string img = @spot.SpotName + ".jpg";
    <img src="~/景點圖片/@spot.SpotCity/@img" width="100px" height="100px">
}
 *@

<div class="nav-center" id="標題" style="color:#e3e5f4; background-color:#4e5482; font-size: 36px;">
    自訂想去的行程
</div>
<!-- -------------------------------------------------------------------------------------------------------- -->
<!-- 行程  生成訂單給會員-->
<div class="row justify-content-center align-items-center m-3">
    <!-- 地點 要控制景點-->
    <div class="col-md-auto">
        <select class="form-select" id="locationSelect">
            <option value="">地點</option>
            @if (cities != null)
            {
                foreach (var city in cities)
                {
                    <option value="@city.ToLower()">@city</option>
                }
            }
        </select>
    </div>

    <!-- 人數 -->
    <div class="col-md-auto">
        <select class="form-select" id="peopleSelect">
            <option value="">人數</option>
            <option value="1">3</option>
            <option value="2">4</option>
            <option value="3">5</option>
        </select>
    </div>

    <!-- 天數 要控制時間選擇 -->
    <div class="col-md-auto col-sm-5">
        <select class="form-select" id="themeSelect">
            <option value="">出遊天數</option>
            <option value="1">一日遊</option>
            <option value="2">二日遊</option>
            <option value="3">三日遊</option>
        </select>
    </div>

    <!-- 日期選擇器 -->

    <label for="from" class="col-md-auto col-sm-2 col-3" id="from1">出發日:</label>
    <input type="text" id="datepicker" class="form-control col-md-auto  col-sm-10 col-7 text-center"
     style="width: auto;">
</div>



@* 行程日程安排 *@
<div class="row align-items-center m-3 text-center">
    <div class="col-lg-1 "></div>
    <div id="accordionContainer" class="col-lg-6 col-md-6 col-sm-6 col-7" style="top: 150px; bottom:100px;">
        <button class="accordion disabled" id="day1" disabled>第一天的景點安排</button>
        <div class="panel" id="panel1">
            <div class="row justify-content-center m-3 text-center">
                <div class="col-xl-3 col-lg-6 col-md-6 col-sm-12">
                    <h4 class="ui-widget-header"><span class="ui-icon ui-icon-calendar"></span>早上</h4>
                    <div id="first-day-morning" class="ui-widget-content ui-state-default"></div>
                </div>
                <div class="col-xl-3 col-lg-6 col-md-6 col-sm-12">
                    <h4 class="ui-widget-header"><span class="ui-icon ui-icon-calendar"></span>下午</h4>
                    <div id="first-day-afternoon" class="ui-widget-content ui-state-default"></div>
                </div>
                <div class="col-xl-3 col-lg-6 col-md-6 col-sm-12">
                    <h4 class="ui-widget-header"><span class="ui-icon ui-icon-calendar"></span>傍晚</h4>
                    <div id="first-day-evening" class="ui-widget-content ui-state-default"></div>
                </div>
                <div class="col-xl-3 col-lg-6 col-md-6 col-sm-12">
                    <h4 class="ui-widget-header"><span class="ui-icon ui-icon-calendar"></span>晚上</h4>
                    <div id="first-day-night" class="ui-widget-content ui-state-default"></div>
                </div>
            </div>
        </div>
        <br>
        <div id="firstDayContainer" class="checkbox-container col-12">
            <input type="checkbox" id="firstDayConfirmCheckbox" disabled> 我已確定第一天行程
        </div>



        <button class="accordion disabled" id="day2" disabled>第二天的景點安排</button>
        <div class="panel" id="panel2">
            <div class="row justify-content-center m-3 text-center">
                <div class="col-xl-3 col-lg-6 col-md-6 col-sm-12">
                    <h4 class="ui-widget-header"><span class="ui-icon ui-icon-calendar"></span>早上</h4>
                    <div id="second-day-morning" class="ui-widget-content ui-state-default"></div>
                </div>
                <div class="col-xl-3 col-lg-6 col-md-6 col-sm-12">
                    <h4 class="ui-widget-header"><span class="ui-icon ui-icon-calendar"></span>下午</h4>
                    <div id="second-day-afternoon" class="ui-widget-content ui-state-default"></div>
                </div>
                <div class="col-xl-3 col-lg-6 col-md-6 col-sm-12">
                    <h4 class="ui-widget-header"><span class="ui-icon ui-icon-calendar"></span>傍晚</h4>
                    <div id="second-day-evening" class="ui-widget-content ui-state-default"></div>
                </div>
                <div class="col-xl-3 col-lg-6 col-md-6 col-sm-12">
                    <h4 class="ui-widget-header"><span class="ui-icon ui-icon-calendar"></span>晚上</h4>
                    <div id="second-day-night" class="ui-widget-content ui-state-default"></div>
                </div>
            </div>
        </div>
        <br>
        <div id="secondDayContainer" class="checkbox-container col-12">
            <input type="checkbox" id="secondDayConfirmCheckbox" disabled> 我已確定第二天行程
        </div>


        <button class="accordion disabled" id="day3" disabled>第三天的景點安排</button>
        <div class="panel" id="panel3">
            <div class="row justify-content-center m-3 text-center">
                <div class="col-xl-3 col-lg-6 col-md-6 col-sm-12">
                    <h4 class="ui-widget-header"><span class="ui-icon ui-icon-calendar"></span>早上</h4>
                    <div id="third-day-morning" class="ui-widget-content ui-state-default"></div>
                </div>
                <div class="col-xl-3 col-lg-6 col-md-6 col-sm-12">
                    <h4 class="ui-widget-header"><span class="ui-icon ui-icon-calendar"></span>下午</h4>
                    <div id="third-day-afternoon" class="ui-widget-content ui-state-default"></div>
                </div>
                <div class="col-xl-3 col-lg-6 col-md-6 col-sm-12">
                    <h4 class="ui-widget-header"><span class="ui-icon ui-icon-calendar"></span>傍晚</h4>
                    <div id="third-day-evening" class="ui-widget-content ui-state-default"></div>
                </div>
                <div class="col-xl-3 col-lg-6 col-md-6 col-sm-12">
                    <h4 class="ui-widget-header"><span class="ui-icon ui-icon-calendar"></span>晚上</h4>
                    <div id="third-day-night" class="ui-widget-content ui-state-default"></div>
                </div>
            </div>
        </div>
        <br>
        <div id="thirdDayContainer" class="checkbox-container col-12">
            <input type="checkbox" id="thirdDayConfirmCheckbox" disabled> 我已確定第三天行程
        </div>
    </div>

    <!-- 景點照片 -->
   
    <div class="col-lg-4 col-md-5 col-sm-6 col-5" style="position: sticky; top: 200px;bottom:150px;">
        <div class="container rounded-3" id="mark" style="background-color: #4e5482; height: 250px;">
            <div class="row justify-content-center">
                <p class="text-white m-3" style="font-size: 20px;">操作方法:</p>
                <p class="text-white m-3">拖曳放置您要的景點，最後點擊「確定行程」前去尋找導遊</p>
                <div class="col-md-8" style="background-color: #f8e8ff;">
                    <ul id="gallery" class="gallery list-unstyled">
                        @foreach (var spot in Model)
                        {
                            string imgPath = "~/景點圖片/" + spot.SpotCity + "/" + spot.SpotName + ".jpg";
                            <li class="ui-widget-content ui-corner-tr">
                                <h5 class="ui-widget-header">@spot.SpotName</h5>
                                <img src="@Url.Content(imgPath)" alt="@spot.SpotName" width="96" height="72">
                                <br>
                                <a href="@Url.Content(imgPath)" title="查看較大的圖片" class="ui-icon ui-icon-zoomin">查看較大</a>
                            </li>
                        }
                    </ul>
                </div>
            </div>
        </div>
    </div>

    <div class="col-lg-1"></div>
 
</div>
   
<!-- -------------------------------------------------------------------------------------------------------- -->




<br>
<!-- 找導遊按鈕 -->
<div class="row m-3">
    <div class="col-1"></div>
    <div class="col-12 col-md-4 col-sm-12">
        <input class="form-check-input" type="checkbox" value="" id="confirmCheckbox" disabled>
        <label class="form-check-label" for="confirmCheckbox">
            我已確定行程，可開始尋找導遊
        </label>
    </div>
</div>
<div class="row m-3">
    <div class="col-8"></div>
    <button class="btn btn-primary btn-block col-3 col-lg-2 col-md-3  shadow" id="findbtn">尋找導遊</button>
    <div class="col-2"></div>
</div>

<br>
<br>
<br>
<br>
<br>
<script>
    $(function () {
        // 選日期
        $("#datepicker").datepicker({
            minDate: 0,
            dateFormat: 'yy/mm/dd'
        });


        //------------------------------------------假資料 假設是由資料庫轉過來的-----------------------------------------------------------------------------
        var spots = {
            "台北": [
                { "name": "台北101", "img": "../../景點圖片/台北/台北101.jpg", "alt": "Taipei 101" },
                { "name": "故宮博物院", "img": "../../景點圖片/台北/故宮博物院.jpg", "alt": "National Palace Museum" },
                { "name": "士林夜市", "img": "../../景點圖片/台北/士林夜市.jpg", "alt": "Shilin Night Market" },
                { "name": "陽明山公園", "img": "../../景點圖片/台北/陽明山國家公園.jpg", "alt": "Yangmingshan National Park" },
                { "name": "龍山寺", "img": "../../景點圖片/台北/龍山寺.jpg", "alt": "Longshan Temple" },
                { "name": "中正紀念堂", "img": "../../景點圖片/台北/中正紀念堂.jpg", "alt": "National Chiang Kai-shek Memorial Hall" },
                { "name": "台北動物園", "img": "../../景點圖片/台北/台北動物園.jpg", "alt": "Taipei Zoo" },
                { "name": "國父紀念館", "img": "../../景點圖片/台北/國父紀念館.jpg", "alt": "Sun Yat-sen Memorial Hall" },
                { "name": "象山", "img": "../../景點圖片/台北/象山.jpg", "alt": "Xiangshan" },
                { "name": "迪化街", "img": "../../景點圖片/台北/迪化街.jpg", "alt": "Dihua Street" },
                { "name": "松山文創園區", "img": "../../景點圖片/台北/松山文創園區.jpg", "alt": "Songshan Cultural and Creative Park" },
                { "name": "北投溫泉區", "img": "../../景點圖片/台北/北投溫泉區.jpg", "alt": "Beitou Hot Spring Area" },
                { "name": "淡水老街", "img": "../../景點圖片/台北/淡水老街.jpg", "alt": "Tamsui Old Street" },
                { "name": "華山文創園區", "img": "../../景點圖片/台北/華山1914文化創意產業園區.jpg", "alt": "Huashan 1914 Creative Park" },
                { "name": "寶藏巖藝術村", "img": "../../景點圖片/台北/寶藏巖國際藝術村.jpg", "alt": "Treasure Hill Artist Village" },
            ],
            "台中": [
                { "name": "台中市高美溼地", "img": "../../景點圖片/台中/高美溼地.jpg", "alt": "Gaomei Wetlands" },
                { "name": "台中市東海大學路思義教堂", "img": "../../景點圖片/台中/東海大學路思義教堂.jpg", "alt": "Luce Memorial Chapel, Tunghai University" },
                { "name": "台中市彩虹眷村", "img": "../../景點圖片/台中/彩虹眷村.jpg", "alt": "Rainbow Village" },
                { "name": "谷關溫泉公園", "img": "../../景點圖片/台中/谷關溫泉公園.jpg", "alt": "Guguan Hot Spring Park" },
                { "name": "秋紅谷", "img": "../../景點圖片/台中/秋紅谷.jpg", "alt": "Autumn Red Valley" },
                { "name": "大坑纜車", "img": "../../景點圖片/台中/大坑纜車.jpg", "alt": "Dakeng Cable Car" },
                { "name": "審計新村", "img": "../../景點圖片/台中/審計新村.jpg", "alt": "Auditing Village" },
                { "name": "台中都會公園", "img": "../../景點圖片/台中/台中都會公園.jpg", "alt": "Taichung Metropolitan Park" },
                { "name": "台中酒家菜文化展示館", "img": "../../景點圖片/台中/台中酒家菜文化展示館.jpg", "alt": "Taichung Restaurant Cuisine Cultural Exhibition Hall" },
                { "name": "臺中州廳", "img": "../../景點圖片/台中/臺中州廳.jpg", "alt": "Taichung Prefectural Hall" },
                { "name": "中興堂", "img": "../../景點圖片/台中/中興堂.jpg", "alt": "Chung-Shing Temple" },
                { "name": "國防園區", "img": "../../景點圖片/台中/國防園區.jpg", "alt": "National Defense Park" },
                { "name": "石岡壩外旅遊步道", "img": "../../景點圖片/台中/石岡壩外旅遊步道.jpg", "alt": "Shigang Dam Outdoor Tourist Trail" },
                { "name": "潭雅神綠園道", "img": "../../景點圖片/台中/潭雅神綠園道.jpg", "alt": "Tan Ya Shen Green Park" },
                { "name": "台中親子館", "img": "../../景點圖片/台中/台中親子館.jpg", "alt": "Taichung Parent-Child Pavilion" },
                { "name": "中社觀光花市", "img": "../../景點圖片/台中/中社觀光花市.jpg", "alt": "Zhongshe Flower Market" },
                { "name": "石似文化園區", "img": "../../景點圖片/台中/石似文化園區.jpg", "alt": "Shisi Cultural Park" }
            ]
        };
        // ---------------------------------------------------------------------------------------------------------------------------------------------------



        // 清除行程表的函數
        function clearSchedule() {
            $('#first-day-morning, #first-day-afternoon, #first-day-evening, #first-day-night, #second-day-morning, #second-day-afternoon, #second-day-evening, #second-day-night, #third-day-morning, #third-day-afternoon, #third-day-evening, #third-day-night').empty();
        }


        // 初始化可拖動功能的函數
        function initializeDraggable() {
            $("li", "#gallery").draggable({
                cancel: "a.ui-icon",
                revert: "invalid",
                containment: "document",
                helper: "clone",
                cursor: "move"
            });

            // 設置圖庫的可放回去功能
            $("#gallery").droppable({
                accept: ".ui-draggable",
                classes: {
                    "ui-droppable-active": "ui-state-highlight"
                },
                drop: function (event, ui) {
                    recycleImage(ui.draggable); // 將圖片回收
                }
            });

            var $firstDayAreas = $("#first-day-morning, #first-day-afternoon, #first-day-evening, #first-day-night");
            var $secondDayAreas = $("#second-day-morning, #second-day-afternoon, #second-day-evening, #second-day-night");
            var $thirdDayAreas = $("#third-day-morning, #third-day-afternoon, #third-day-evening, #third-day-night");

            // 預設圖片還沒放
            var dropAreasStatus = {
                firstDay: {},
                secondDay: {},
                thirdDay: {}
            };

            $firstDayAreas.each(function () {
                dropAreasStatus.firstDay[this.id] = false;
            });

            $secondDayAreas.each(function () {
                dropAreasStatus.secondDay[this.id] = false;
            });

            $thirdDayAreas.each(function () {
                dropAreasStatus.thirdDay[this.id] = false;
            });

            // 分别檢查每一天的區塊是否都已經放置了圖片
            function checkDayAreasFilled(day) {
                for (var areaId in dropAreasStatus[day]) {
                    if (!dropAreasStatus[day][areaId]) {
                        return false;
                    }
                }
                return true;
            }

            // 統一的drop處理程序
            function handleDrop(event, ui, day) {
                var $trash = $(this);
                var $existingItem = $trash.find("li");

                if ($existingItem.length) {
                    recycleImage($existingItem);
                }

                deleteImage(ui.draggable, $trash);

                // 標記該區塊已放置圖片
                dropAreasStatus[day][$trash.attr("id")] = true;

                // 檢查該天所有區塊是否已經放置了圖片
                if (checkDayAreasFilled(day)) {
                    $("#" + day + "ConfirmCheckbox").prop("disabled", false);
                }
            }

            $firstDayAreas.droppable({
                accept: "#gallery > li",
                classes: {
                    "ui-droppable-active": "ui-state-highlight"
                },
                drop: function (event, ui) {
                    handleDrop.call(this, event, ui, 'firstDay');
                }
            });

            $secondDayAreas.droppable({
                accept: "#gallery > li",
                classes: {
                    "ui-droppable-active": "ui-state-highlight"
                },
                drop: function (event, ui) {
                    handleDrop.call(this, event, ui, 'secondDay');
                }
            });

            $thirdDayAreas.droppable({
                accept: "#gallery > li",
                classes: {
                    "ui-droppable-active": "ui-state-highlight"
                },
                drop: function (event, ui) {
                    handleDrop.call(this, event, ui, 'thirdDay');
                }
            });

            //





            // 刪除圖片的函數
            function deleteImage($item, $trash) {
                var recycle_icon = "<a href='#' title='回收此圖片' class='ui-icon ui-icon-refresh'>回收圖片</a>";
                $item.fadeOut(function () {
                    $item.find("a.ui-icon-arrowrefresh-1-s").remove();
                    $item.append(recycle_icon).appendTo($trash).fadeIn();

                    $item.find(".ui-icon-refresh").on("click", function () {
                        recycleImage($item);
                    });
                });
            }

            // 回收圖片的函數
            function recycleImage($item) {
                var trash_icon = "<a href='#' title='刪除此圖片' class='ui-icon ui-icon-arrowrefresh-1-s'>刪除圖片</a>";
                $item.fadeOut(function () {
                    $item.find("a.ui-icon-refresh").remove().end()
                        .append(trash_icon)
                        .appendTo("#gallery").fadeIn(function () {
                            $item.find('img').css('height', $item.data('original-height'));
                        });

                    $item.draggable({
                        revert: true,
                        containment: "document",
                        cursor: "move",
                        helper: "original"
                    });
                });
            }
        }
        // 對地點選擇下拉菜單變更的事件監聽器
        $('#locationSelect').change(clearSchedule);

        // 點擊圖庫項目的事件監聽器
        $("li").on("click", function (event) {
            var $item = $(this),
                $target = $(event.target);

            if ($target.is("a.ui-icon-arrowrefresh-1-s")) {
                deleteImage($item);
            } else if ($target.is("a.ui-icon-zoomin")) {
                viewLargerImage($target);
            } else if ($target.is("a.ui-icon-refresh")) {
                recycleImage($item);
            }
            return false;
        });

        // 查看較大圖片的函數
        function viewLargerImage($link) {
            var src = $link.attr("href"),
                title = $link.siblings("img").attr("alt"),
                $modal = $("img[src$='" + src + "']");

            if ($modal.length) {
                $modal.dialog("open");
            } else {
                var img = $("<img alt='" + title + "' width='384' height='288' style='display: none; padding: 8px;' />")
                    .attr("src", src).appendTo("body");
                setTimeout(function () {
                    img.dialog({
                        title: title,
                        width: 40,
                        modal: true
                    });
                }, 1);
            }
        }

        // ---------------------------------------------
        document.getElementById('themeSelect').addEventListener('change', function () {
            const value = this.value;
            const firstDayContainer = document.getElementById('firstDayContainer');
            const secondDayContainer = document.getElementById('secondDayContainer');
            const thirdDayContainer = document.getElementById('thirdDayContainer');
            const day1Button = document.getElementById('day1');
            const day2Button = document.getElementById('day2');
            const day3Button = document.getElementById('day3');

            // Reset all containers and buttons
            [firstDayContainer, secondDayContainer, thirdDayContainer].forEach(container => container.style.display = 'none');
            [day1Button, day2Button, day3Button].forEach(button => {
                button.classList.add('disabled');
                button.disabled = true;
            });

            if (value === '1') {
                firstDayContainer.style.display = 'block';
                day1Button.classList.remove('disabled');
                day1Button.disabled = false;
            } else if (value === '2') {
                [firstDayContainer, secondDayContainer].forEach(container => container.style.display = 'block');
                [day1Button, day2Button].forEach(button => {
                    button.classList.remove('disabled');
                    button.disabled = false;
                });
            } else if (value === '3') {
                [firstDayContainer, secondDayContainer, thirdDayContainer].forEach(container => container.style.display = 'block');
                [day1Button, day2Button, day3Button].forEach(button => {
                    button.classList.remove('disabled');
                    button.disabled = false;
                });
            }
        });

        document.getElementById("findbtn").addEventListener("click", function () {
            const confirmCheckbox = document.getElementById("confirmCheckbox");
            const firstDayConfirmCheckbox = document.getElementById("firstDayConfirmCheckbox");
            const secondDayConfirmCheckbox = document.getElementById("secondDayConfirmCheckbox");
            const thirdDayConfirmCheckbox = document.getElementById("thirdDayConfirmCheckbox");

            if (!confirmCheckbox.checked) {
                alert("你需要勾選《我確定行程》");
                return;
            }

            // 判断主题选择
            const themeSelectValue = document.getElementById('themeSelect').value;

            if (themeSelectValue === '3') {
                // 第三天选择，需要所有复选框都选中
                if (firstDayConfirmCheckbox.checked && secondDayConfirmCheckbox.checked && thirdDayConfirmCheckbox.checked) {
                    window.location.href = "Tourist guide.html";
                } else {
                    alert("你需要勾選《我已確定前三天的行程》");
                }
            } else if (themeSelectValue === '2') {
                // 第二天选择，只需要前两天复选框选中
                if (firstDayConfirmCheckbox.checked && secondDayConfirmCheckbox.checked) {
                    window.location.href = "Tourist guide.html";
                } else {
                    alert("你需要勾選《我已確定前兩天的行程》");
                }
            } else if (themeSelectValue === '1') {
                // 第一天选择，只需要第一天复选框选中
                if (firstDayConfirmCheckbox.checked) {
                    window.location.href = "Tourist guide.html";
                } else {
                    alert("你需要勾選《我已確定第一天的行程》");
                }
            } else {
                alert("請選擇一個有效的主題");
            }
        });



        // 地點人數日期 幾天都要選過 才可以啟用核取方塊
        const locationSelect = document.getElementById('locationSelect');
        const peopleSelect = document.getElementById('peopleSelect');
        const daysSelect = document.getElementById('themeSelect');
        const confirmCheckbox = document.getElementById('confirmCheckbox');
        const datepicker = document.getElementById('datepicker');

        function updateCheckboxState() {
            const locationValue = locationSelect.value;
            const peopleValue = peopleSelect.value;
            const daysValue = daysSelect.value;
            const departureDate = datepicker.value;

            if (locationValue === '' || peopleValue === '' || daysValue === '' || departureDate === '') {
                confirmCheckbox.disabled = true;
                confirmCheckbox.checked = false;
            } else {
                confirmCheckbox.disabled = false;
                confirmCheckbox.checked = false;
            }
        }

        locationSelect.addEventListener('change', updateCheckboxState);
        peopleSelect.addEventListener('change', updateCheckboxState);
        daysSelect.addEventListener('change', updateCheckboxState);
        datepicker.addEventListener('change', updateCheckboxState);

        // 初始化手風琴
        var acc = document.getElementsByClassName("accordion");
        var panels = document.getElementsByClassName("panel");
        var i;

        for (i = 0; i < acc.length; i++) {
            acc[i].addEventListener("click", function () {
                if (this.classList.contains("disabled")) {
                    alert("請先選擇出遊天數");
                    return;
                }

                var panel = this.nextElementSibling;
                if (panel.style.maxHeight) {
                    panel.style.maxHeight = null;
                    this.classList.remove("active");
                } else {
                    for (var j = 0; j < panels.length; j++) {
                        panels[j].style.maxHeight = null;
                        panels[j].previousElementSibling.classList.remove("active");
                    }
                    panel.style.maxHeight = panel.scrollHeight + "px";
                    this.classList.add("active");
                }
            });
        }

        // 出遊天數選擇
        document.getElementById('themeSelect').addEventListener('change', function () {
            var days = parseInt(this.value, 10);
            for (i = 1; i <= 3; i++) {
                var dayButton = document.getElementById('day' + i);
                var dayPanel = document.getElementById('panel' + i);
                if (i <= days) {
                    dayButton.style.display = 'block';
                    dayPanel.style.display = 'block';
                    dayButton.classList.remove("disabled");
                    dayButton.disabled = false;
                } else {
                    dayButton.style.display = 'none';
                    dayPanel.style.display = 'none';
                    dayButton.classList.add("disabled");
                    dayButton.disabled = true;
                }
            }
        });

        // 讓行程不會跑掉
        var day1Button = document.getElementById("day1");
        var day2Button = document.getElementById("day2");
        var day3Button = document.getElementById("day3");
        day1Button.addEventListener("click", scrollToTop);
        day2Button.addEventListener("click", scrollToTop);
        day3Button.addEventListener("click", scrollToTop);

        function scrollToTop() {
            var accordionContainer = document.getElementById("accordionContainer");
            var topPosition = accordionContainer.offsetTop - 100;
            window.scrollTo({
                top: topPosition,
                behavior: 'smooth'
            });
        }




        // 定義調整字體大小的函式
        function adjustFontSize(size) {
            // 調整根元素的字體大小
            document.documentElement.style.fontSize = size;
        }

        // 獲取按鈕元素
        var bigBtn = document.getElementById('big');
        var smallBtn = document.getElementById('sm');

        // 添加點擊事件監聽器，調整字體大小
        bigBtn.addEventListener('click', function () {
            adjustFontSize('20px'); // 設置大字體大小
        });

        smallBtn.addEventListener('click', function () {
            adjustFontSize('16px'); // 設置小字體大小
        });

    });



    $(document).ready(function () {
        $(".navbar-toggler").click(function () {
            $("#navbarNav").toggleClass("show");
        });
    });


    //
    $(function () {
        // 設置可拖曳項目
        $(".gallery li").draggable({
            helper: "clone",
            revert: "invalid"
        });

        // 設置放置區域
        $(".ui-widget-content").droppable({
            accept: ".gallery li",
            drop: function (event, ui) {
                var $this = $(this);
                var item = ui.helper.clone();
                $this.append(item);

                // 調用更新行程函數
                updateItinerary();
            }
        });
    });

    function updateItinerary() {
        var itinerary = {};

        // 遍歷所有放置區域，收集數據
        $(".ui-widget-content").each(function () {
            var id = $(this).attr('id');
            var activities = [];

            $(this).find("li").each(function () {
                activities.push($(this).text());
            });

            itinerary[id] = activities;
        });

        // 使用 AJAX 發送數據到 MVC 控制器
        $.ajax({
            type: "POST",
            url: "/Itinerary/Update",
            data: JSON.stringify(itinerary),
            contentType: "application/json; charset=utf-8",
            dataType: "json",
            success: function (response) {
                console.log("行程更新成功:", response);
            },
            error: function (error) {
                console.error("行程更新失敗:", error);
            }
        });
    }
</script>



