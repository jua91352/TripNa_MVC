@model IEnumerable<TripNa_MVC.Models.Spot>
@* @model Travel_project.Models.FilteredSpotsViewModel *@
<link href="/lib/jquery/dist/jquery.min.js" rel="stylesheet" />
<link href="/css/information.css" rel="stylesheet" />


@if (ViewData["NoResult"] != null)
{
	<div class="nullresult">@ViewData["NoResult"]</div>
}
else if (ViewData["FilteredCount"] != null)
{
	<div>共有 @ViewData["FilteredCount"] 項結果</div>
}
else
{
	<div>共有 @ViewData["SearchCount"] 項結果</div>
	@* <div>總共有 @ViewData["TotalCount"] 條記錄</div> *@
}
<br />


<div class="row row-cols-1 row-cols-md-3 g-4 row-cols-sm-1 g-4 row-cols-xl-3 g-4 row-cols-xxl-4 g-4">
	@foreach (var spots in Model)
	{
		string img = "/景點圖片/" + spots.SpotCity + "/" + spots.SpotName + ".jpg";
		<div class="col">
			<div class="card" style="width:24rem;height:400px;  box-shadow: 0 3px 10px rgb(0,0,0,.2);">


				@* <img src="@Url.Content(img)" class="img-fluid h-100 rounded-start" alt="Alternate Text" height:100px; style="max-height:250px; position:relative;" />
			<div class="img-overlay">


			<a href="@img" title="查看較大的圖片" class="ui-icon ui-icon-zoomin"><span class="zoom-icon">&#128269;</span></a>
			</div>


			*@

				<div class="img-container">
					<img src="@Url.Content(img)" class="img-fluid rounded-start" alt="Alternate Text" style="height:250px; position:relative;width:100%;" />
					<div class="img-overlay">
						<span class="zoom-icon">&#128269;</span>
					</div>
				</div>


				@* <p class="card-text" style="background-color:#4e5482;color:white; width:80px;height:20px;text-align:center;border-radius:5px;position:absolute;bottom:38%;font-weight:700;margin-left:5px;">@restaurant.FoodType</p> *@
				<div class="card-body" style="overflow:auto;">
					<span class="heart-icon align-self-end" id="">&#10084;</span>
					<h4 class="card-title" style="font-weight:800; font-size:1.2rem;">@spots.SpotName</h4>
					<h5 class="card-title">@spots.SpotCity</h5>
					@* <h5 class="card-title" style="font-weight:800;">@spots.SpotName</h5> *@
					@* <p class="card-text">@spots.SpotBrief</p> *@
					<p class="card-text">@spots.SpotIntro</p>

				</div>
			</div>
		</div>
	}
</div>


<style>
	.card-text, .card-title {
		font-size: .8rem;
	}

	.card {
		transition: transform 0.3s;
		/* z-index:3; */
	}

		.card:hover {
			transform: scale(1.05);
			box-shadow: 0 8px 16px rgba(0, 0, 0, 0.3);
			background-color: #cdcfee4f;
			transition-duration: 1s;
			.card-text, .card-title

	{
		font-size: 1rem;
	}

	}

	.img-overlay {
		position: absolute;
		bottom: 0;
		right: 0;
		width: 100%;
		height: 100%;
		/* background-color: rgba(0, 0, 0, 0.5); */
		opacity: 0;
		transition: opacity 0.3s;
		display: flex;
		/* justify-content: center;
			align-items: center; */
	}

	.zoom-icon {
		color: white;
		font-size: 1.4rem;
	}

	.img-overlay:hover {
		opacity: 1;
		cursor: pointer;
		/* z-index: 1; */
		/* overflow: visible; */
	}

	.img-container {
		position: relative;
	}

		.img-container img {
			transition: transform 0.3s ease;
		}

		.img-container.zoomed img {
			transform: scale(1.5);
			overflow: visible;
			/* z-index: 1; */
		}

</style>
</style>
@section Scripts {
	<script>
		// 模擬用戶登入狀態
		function isUserLoggedIn() {
			// 在實際應用中，這應該是通過檢查會話、令牌等來完成
			// 這裡我們用一個簡單的變量來模擬
			return false; // 假設用戶未登入
		}

		// 模擬登入函數
		function login() {
			// 在實際應用中，這應該重定向到登入頁面或顯示登入對話框
			alert("重定向到登入頁面...");
		}

		const heartIcons = document.querySelectorAll('.heart-icon');

		heartIcons.forEach(function (heartIcon) {
			heartIcon.addEventListener('click', function () {
				if (isUserLoggedIn()) {
					// 用戶已登入，切換愛心狀態
					this.classList.toggle('filled');

					// 在這裡你可以發送 AJAX 請求到後端，保存收藏狀態
					const restaurantId = this.dataset.restaurantId;
					const isFavorite = this.classList.contains('filled');
					console.log(`餐廳 ID ${restaurantId} 收藏狀態: ${isFavorite}`);
				} else {
					// 用戶未登入，顯示警告並提供登入選項
					const wantToLogin = confirm("您需要登入才能收藏餐廳。是否現在登入？");
					if (wantToLogin) {
						login();
					}
				}
			});
		});




	</script>
}